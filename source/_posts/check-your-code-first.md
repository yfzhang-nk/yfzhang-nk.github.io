---
title: 程序员应该知道的97件事-9 先检查你自己的代码
date: 2020-08-20 16:51:29
tags:
	- 程序员应该知道的97件事
categories:
	- 英文文章翻译
---

原文链接：{% link Check Your Code First before Looking to Blame Others, https://97-things-every-x-should-know.gitbooks.io/97-things-every-programmer-should-know/content/en/thing_09/, https://uploads-ssl.webflow.com/5c349f90a3cd4515d0564552/5c66e5b48238e30e170da3be_logo.svg %}

## {% span blue, 责备别人之前先检查自己的代码 %}

程序员们经常很难相信自己的代码是有问题的。这是不太可能的，以至于我们总是觉得是编译器的问题。

然而事实上，代码问题是由编译器、解释器、操作系统、应用服务器、数据库、内存管理或者其他系统软件的bug引起的可能性非常少见。的确，这些bug存在，但是它们远没有我们想象中的普遍。

我曾经在优化一个循环变量时遇到过一个编译器错误，但是我却认为我的编译器和操作系统发生过很多次这样的错误。在这个过程中我浪费了很多时间，除了我自己的，还有支持人员和管理人员的时间，最终都证明是我的错误，这让我觉得很愚蠢。

假设这个工具被广泛的使用、功能成熟并且被应用到很多技术栈中，那应该是没有什么理由去怀疑它的质量。当然，如果这个工具刚刚发布、世界范围内很少人使用或者下载、0.1版本的开源软件，我们可能有好的理由去怀疑这个软件。同样，商业软件的alpha版本也可能受到怀疑。
<!-- more -->

鉴于编译器bug很少见，把时间和精力放在寻找你自己代码上的错误，比证明编译器有问题要好的多。所有常用调试建议都试用：分离问题，终止调用，测试覆盖；检查调用约定、共享代码库、版本号；向其他人解释代码；注意堆栈污染和变量类型错误；在不同的机器上运行代码或者使用不同构建配置（调试或者发布）进行编译。

质疑你的或者其他人的设想。不同供应商的工具可能基于不同的设想去构建工具--相同供应商的也有可能不同的工具。当别人报告一个问题，你不能复现，就去看看他们是怎么操作的。他们有可能做了你从没想过的操作或者按照不同顺序进行了操作。

我有一个个人规则，如果有一个bug我查不到原因，我就会开始寻找编译器的原因，然后是查看堆栈错误。特别正确的做法是加一些跟踪代码，让问题显现出来。

多线程问题是引起bug的另一个原因，它会让你头发变白，对着机器大喊大叫。当系统是多线程的时候，支持简单代码的所有建议也成倍增加。想找出关于一致性的bug仅仅依赖于调试和单元测试是不行的，这个时候设计的简单性至关重要。

所以别着急找编译器的错误，记住夏洛克 福尔摩斯的建议: 除去不可能的，剩下的即使再不太可能，那也是真相。我更喜欢怪探德克的那句话：除去不太可能的，剩下的即使再不可能，那也是真相。

## {% span blue, 单词 %}
{% pullquote [class] %}
{% span green, stub out%} 掐灭、踩熄
{% span green, paramount %} adj. 最重要的，主要的；至高无上的 n. 最高统治者
{% endpullquote %}

## {% span blue, 个人观点 %}
总结来说就是先从自身找问题，再去找别人的问题。经常被人用的代码问题肯定比你写代码出现问题的可能性要小的多，因为问题早都在初期被人找到并且修复了。
